[tools]
node = "latest"
pnpm = "latest"

[tasks.ok]
description = "Run format, typecheck, and knip checks"
run = "bun run ok"

[tasks.web]
description = "Start web dev server (sandbox env)"
run = "mise -E sandbox exec -- bun --cwd packages/web dev --port 3100"

[tasks."sandbox:polar-sync"]
description = "Sync Polar.sh configuration (sandbox)"
run = "mise -E sandbox exec -- bun scripts/polar-sync.ts --server sandbox --recreate"

[tasks."production:polar-sync"]
description = "Sync Polar.sh configuration (production)"
run = "mise -E production exec -- bun scripts/polar-sync.ts"

[tasks."db:migrate"]
description = "Run database migrations"
run = "bun --cwd packages/web exec drizzle-kit migrate"

[tasks."db:generate-migration"]
description = "Generate a new migration"
run = "bun --cwd packages/web exec drizzle-kit generate"

[tasks."clear-test-user"]
description = "Clear test user from Turso and Polar"
run = "bun -C packages/web exec tsx scripts/clear-test-user.ts {{arg(name='email')}}"
